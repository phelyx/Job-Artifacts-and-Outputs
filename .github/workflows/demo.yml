name:  Learning to use Job Artifacts
on: [push,workflow_dispatch] 

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Get Code
        uses: actions/checkout@v4
      - name: install dependencies
        run: npm ci
      - name: lint code
        run: npm run lint
      - name: Test code 
        run: npm run test 
        

  
  test:
  #  needs: lint
    runs-on: ubuntu-latest
    steps:
      - name: Get Code
        uses:  actions/checkout@v4
      - name: install dependencies
        run: npm ci
      - name: Run test
        run:  npm test


  build:
  #  needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Get Code
        uses: actions/checkout@v4
      - name: Install dependencies
        run: npm ci  
      - name: Build project
        run: npm run build    
             echo "App has been built, ready for deployment"
      #Upload Artifacts ##
      - name: Upload artifacts
        uses: actions/upload-artifacts@v3
        with: 
          name: dist-files
          path: |
            dist
            package.json
  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Get Code
        uses: actions/checkout@v4
      - name: Install dependencies
        run: npm ci  
      - name: Build project
        run: npm run build  
      - name: Deploy app
        run: echo "App has been deployed and running"


